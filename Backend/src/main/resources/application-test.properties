# Configuration tests
# Base de données H2 en mémoire pour tests rapides
%test.quarkus.datasource.db-kind=h2
%test.quarkus.datasource.jdbc.url=jdbc:h2:mem:test-rdq;DB_CLOSE_DELAY=-1
%test.quarkus.hibernate-orm.database.generation=drop-and-create

# Alternative: Testcontainers PostgreSQL pour tests d'intégration
# %test.quarkus.datasource.db-kind=postgresql
# %test.quarkus.datasource.jdbc.url=jdbc:tc:postgresql:16:///rdq_test

# Désactivation Liquibase en tests (car drop-and-create)
%test.quarkus.liquibase.migrate-at-start=false

# Logs détaillés pour debugging tests
%test.quarkus.log.level=DEBUG
%test.quarkus.log.category."com.rdq".level=DEBUG

# Désactivation fonctionnalités non nécessaires en test
%test.quarkus.mailer.mock=true
%test.quarkus.scheduler.enabled=false

# JWT test avec clé simple
%test.mp.jwt.verify.publickey.location=META-INF/test-publickey.pem

# Métriques désactivées en test
%test.quarkus.micrometer.enabled=false