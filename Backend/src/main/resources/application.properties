# Configuration de base pour tous les environnements
# Base de données PostgreSQL 16 selon les instructions
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.driver=org.postgresql.Driver
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.dialect=org.hibernate.dialect.PostgreSQLDialect

# Liquibase OBLIGATOIRE selon les instructions
quarkus.liquibase.migrate-at-start=true
quarkus.liquibase.change-log=db/changelog/db.changelog-master.xml
quarkus.liquibase.validate-on-migrate=true

# JWT Security configuration
mp.jwt.verify.issuer=rdq-app
mp.jwt.verify.publickey.location=META-INF/publickey.pem
quarkus.smallrye-jwt.enabled=true

# Expiration courte des tokens pour sécurité OWASP A02
mp.jwt.token.expiration=3600

# CORS configuration sécurisée OWASP A06
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:3000
quarkus.http.cors.methods=GET,POST,PUT,DELETE
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with

# Headers de sécurité OWASP A06
quarkus.http.header."X-Frame-Options".value=DENY
quarkus.http.header."X-Content-Type-Options".value=nosniff
quarkus.http.header."X-XSS-Protection".value=1; mode=block
quarkus.http.header."Strict-Transport-Security".value=max-age=31536000; includeSubDomains

# Sécurisation des cookies OWASP A02
quarkus.http.same-site-cookie=strict

# Logs configuration
quarkus.log.level=INFO
quarkus.log.category."com.rdq".level=DEBUG
quarkus.log.category."org.hibernate.SQL".level=WARN

# Health checks sécurisés OWASP A10
quarkus.health.enabled=true
quarkus.health.openapi.included=false

# Métriques de sécurité OWASP A10
quarkus.micrometer.enabled=true
quarkus.micrometer.export.prometheus.enabled=true

# OpenAPI documentation
quarkus.swagger-ui.enable=true
quarkus.swagger-ui.path=/swagger-ui

# Configuration des emails
quarkus.mailer.from=rdq-noreply@company.com
quarkus.mailer.host=localhost
quarkus.mailer.port=1025

# Configuration des tâches programmées
quarkus.scheduler.enabled=true